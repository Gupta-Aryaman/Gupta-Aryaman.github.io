<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Asynchronous Programming in Python | aryaman.space</title>
<meta name="keywords" content="asynchronous, async, python, aryaman-batcave">
<meta name="description" content="Sync vs Async What is synchronous programming?
Synchronous programming is a programming paradigm in which operations are executed sequentially, one after the other. In this model, each operation waits for the previous one to complete before moving on to the next step. This sequential execution can lead to &lsquo;blocking&rsquo; operations, where certain tasks may take a significant amount of time to finish. These blocking operations can pause the entire program&rsquo;s execution, forcing it to wait until the time-consuming task is done before it can proceed.">
<meta name="author" content="Aryaman Gupta">
<link rel="canonical" href="https://aryaman.space/blog/asynchronous-programming-in-python/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://aryaman.space/images/favicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://aryaman.space/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://aryaman.space/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://aryaman.space/apple-touch-icon.png">
<link rel="mask-icon" href="https://aryaman.space/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://aryaman.space/blog/asynchronous-programming-in-python/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  

<meta property="og:url" content="https://aryaman.space/blog/asynchronous-programming-in-python/">
  <meta property="og:site_name" content="aryaman.space">
  <meta property="og:title" content="Asynchronous Programming in Python">
  <meta property="og:description" content="Sync vs Async What is synchronous programming?
Synchronous programming is a programming paradigm in which operations are executed sequentially, one after the other. In this model, each operation waits for the previous one to complete before moving on to the next step. This sequential execution can lead to ‘blocking’ operations, where certain tasks may take a significant amount of time to finish. These blocking operations can pause the entire program’s execution, forcing it to wait until the time-consuming task is done before it can proceed.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2023-09-21T00:00:00+00:00">
    <meta property="article:modified_time" content="2023-09-21T00:00:00+00:00">
    <meta property="article:tag" content="Asynchronous">
    <meta property="article:tag" content="Async">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="Aryaman-Batcave">
      <meta property="og:image" content="https://aryaman.space/images/about.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://aryaman.space/images/about.jpg">
<meta name="twitter:title" content="Asynchronous Programming in Python">
<meta name="twitter:description" content="Sync vs Async What is synchronous programming?
Synchronous programming is a programming paradigm in which operations are executed sequentially, one after the other. In this model, each operation waits for the previous one to complete before moving on to the next step. This sequential execution can lead to &lsquo;blocking&rsquo; operations, where certain tasks may take a significant amount of time to finish. These blocking operations can pause the entire program&rsquo;s execution, forcing it to wait until the time-consuming task is done before it can proceed.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Blog",
      "item": "https://aryaman.space/blog/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Asynchronous Programming in Python",
      "item": "https://aryaman.space/blog/asynchronous-programming-in-python/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Asynchronous Programming in Python",
  "name": "Asynchronous Programming in Python",
  "description": "Sync vs Async What is synchronous programming?\nSynchronous programming is a programming paradigm in which operations are executed sequentially, one after the other. In this model, each operation waits for the previous one to complete before moving on to the next step. This sequential execution can lead to \u0026lsquo;blocking\u0026rsquo; operations, where certain tasks may take a significant amount of time to finish. These blocking operations can pause the entire program\u0026rsquo;s execution, forcing it to wait until the time-consuming task is done before it can proceed.",
  "keywords": [
    "asynchronous", "async", "python", "aryaman-batcave"
  ],
  "articleBody": "Sync vs Async What is synchronous programming?\nSynchronous programming is a programming paradigm in which operations are executed sequentially, one after the other. In this model, each operation waits for the previous one to complete before moving on to the next step. This sequential execution can lead to ‘blocking’ operations, where certain tasks may take a significant amount of time to finish. These blocking operations can pause the entire program’s execution, forcing it to wait until the time-consuming task is done before it can proceed. Let’s understand it with an example:\n1 2 3 4 5 6 7 8 9 from time import sleep def foo(): print(\"in foo\") sleep(10) # mimicking some blocking operation print(\"end foo\") foo() print(\"Termination of the program\") Here, you can observe that the program’s execution was strictly sequential, and this led to a halt in the entire program due to a blocking operation inside the foo() function, which took 10 seconds to complete. After this 10-second delay, the program continued its execution.\nThis situation isn’t ideal because these blocking operations could encompass a wide range of tasks, such as database queries or waiting for API responses, and they unnecessarily delay the execution of unrelated parts of the program. This is precisely where the concept of asynchronization becomes valuable.\nSo, what is asynchronization?\nIn computer programming, asynchrony encompasses events that occur independently of the primary program flow and methods for managing these events. In essence, asynchronization implies that you can proceed with executing other sections of code without the need to wait for a particular task to finish.\nThe first step in creating an asynchronous program is creating a coroutine.\nWhat’s a coroutine in Python? A coroutine is simply a wrapped version of a function that allows it to run asynchronously. I recommend using Python 3.7+ to follow this guide.\n1 2 3 4 5 6 import asyncio # importing async library async def main(): # defining a coroutine object print(\"hello world\") print(main()) # Output - To create a coroutine object, you just need to create a function normally and add an async keyword in front of it. What it essentially does is create a wrapper around this function.\nSo when we call this function, it creates a coroutine object . This coroutine object works just like a function and can be executed. To execute a coroutine, you need to await it.\nWait, WHAT?! What’s awaiting? Let me show you the output of the above snippet of code.\nAs we have a coroutine object now, it does not work like a regular Python function.\nAsync Event-Loop Ok. No worries. Let me just await the main() function call, and then it should work, right?\n1 2 3 4 5 6 import asyncio async def main(): print(\"hello world\") await main() Oh, no! It gave an error. So what’s the issue? The reason it’s not running our code because we haven’t created an event-loop.\nWhenever we create an asynchronous program in Python, we need to start/create an event loop. An event loop typically refers to the core mechanism used for managing and handling asynchronous or non-blocking operations. It’s a fundamental component of many asynchronous programming frameworks, such as asyncio, which we are using in our study. It is responsible for this simple async syntax we are seeing here in the backend. We must start an event loop in whatever thread we are running this asynchronous program in.\n1 2 3 4 5 6 import asyncio async def main(): print(\"hello world\") asyncio.run(main()) Hence, to start an event loop, we use asyncio.run() and pass it a coroutine object, which acts as an entry point to the event loop.\nAwait keyword 1 2 3 4 5 6 7 8 9 10 11 12 import asyncio async def main(): print(\"awaiting foo...\") await foo(\"inside foo\") print(\"finished awaiting foo\") async def foo(text): print(text) await asyncio.sleep(1) asyncio.run(main()) If we look inside the foo() function, the await keyword is required to run an object of coroutine, because if you just write something like asyncio.sleep(1) you are just creating a coroutine but not executing it.\nAnd we are allowed to use await because we are present inside an asynchronous function. So, if we try to see the output of the entire code, it would be as follows:\nWe can see that we awaited the foo() function call, and going inside the foo() function we waited for 1 sec and then the execution was back to the main() function.\nBut this is not entirely useful, as we can see that this seems to be just another way of writing a synchronous program as we are waiting for foo() to execute and then we go forward with the execution in the main() function.\nThe whole point of asynchronization is to run something else while we are waiting for some other part of the execution to finish which is not achieved here. This can be achieved by creating a task.\nasyncio Tasks 1 2 3 4 5 6 7 8 9 10 11 12 13 import asyncio async def main(): print(\"awaiting foo...\") task = asyncio.create_task(foo(\"inside foo\")) print(\"finished awaiting foo\") async def foo(text): print(text) await asyncio.sleep(1) print(\"Ending foo\") asyncio.run(main()) If we see the code above, we are creating a task using the create_task() function and passing a coroutine object to it. This essentially tells the program to run the task as soon as there is some kind of waiting in the main line of execution.\nAnalyzing the output, we can see that the execution of the main() function is completed and then the execution of foo() starts.\nVERY IMPORTANT RESULT\nYou can also see that the “Ending foo” never printed and the execution time of the program was only 0.132 sec. Weren’t we sleeping for 1 sec, so shouldn’t the execution time be at least 1 sec and “Ending foo” should be printed after? What happened here is when the foo() function started sleeping for 1 sec, the execution of the program was given back to the main() function, and as there weren’t any tasks left in the main() function, it terminated and as a result terminated the execution of foo() as well which never completed its execution.\nSo if I want to wait for the foo() to finish it’s execution before main() terminates I will need to await it, essentially preventing the main() function to terminate prior to the completion of the task foo().\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 import asyncio async def main(): print(\"awaiting foo...\") task = asyncio.create_task(foo(\"inside foo\")) print(\"finished awaiting foo\") await task async def foo(text): print(text) await asyncio.sleep(1) print(\"Ending foo\") asyncio.run(main()) Hence the output would be as follows (note the time taken for execution).\nMore Examples 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 import asyncio async def fetch_data(): print('Start fetching') await asyncio.sleep(2) # mimicking fetching data via some request print('Done fetching') return {'data': 1} async def print_numbers(): for i in range(10): print(i) await asyncio.sleep(0.25) # mimicking waiting for a response async def main(): task1 = asyncio.create_task(fetch_data()) task2 = asyncio.create_task(print_numbers()) # awaiting task1 to be completed and then using # the value it returned value = await task1 print(value) await task2 asyncio.run(main()) Imagine the above scenario where I need to get the return value {'data': 1} from the fetch_data() coroutine executing via task1 in the main() function. Hence, I declare the task1 and print(task1). It would have worked in a synchronous environment. But, from what we have learned so far this is counterintuitive.\nAs we can see in the output of the above code, we never awaited for the task to be completed, hence we would never get the return value from the function (can relate to promises in JavaScript).\nHence the correct code should be as follows:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 import asyncio async def fetch_data(): print('Start fetching') await asyncio.sleep(2) # mimicking fetching data via some request print('Done fetching') return {'data': 1} async def print_numbers(): for i in range(10): print(i) await asyncio.sleep(0.25) # mimicking waiting for a response async def main(): task1 = asyncio.create_task(fetch_data()) task2 = asyncio.create_task(print_numbers()) # awaiting for task1 to be completed and then using # the value it returned value = await task1 print(value) await task2 asyncio.run(main()) As we can see in the output, because we awaited for task1 to finish, we can get the value returned by it and print it later. We can further see that as fetch_data() was waiting for 2 sec, for loop in print_numbers() executed 8 times (~2 sec) and gave a chance back to fetch_data() as it’s waiting time had ended.\nConclusion When we write async def func_name(), what we are doing is wrapping another function with an asynchronous version of it. That version is the Coroutine. To run the coroutine, you must await it in some way or add it to the event loop. You can add it to the event loop by creating a task (asyncio.create_task(func_name())). This allows you to start multiple coroutines concurrently. Finally, to start your asynchronous program, you must create an event loop, which can be done by asyncio.run(driver_func()) and passing an entry point coroutine, which is generally the driver function of your program (for example, the main function).\nOne thing to note is that at a time only a single execution is happening, and it is not to be confused with parallel processing or threading.\nReferences deepsource.com/glossary/synchronous-programming\nen.wikipedia.org/wiki/Asynchrony_(computer_programming)\nasyncio.run/\ndocs.python.org/3/library/asyncio-task.htm\ndocs.python.org/3/library/asyncio-eventloop.html\nyoutube.com/@TechWithTim\n",
  "wordCount" : "1603",
  "inLanguage": "en",
  "image": "https://aryaman.space/images/about.jpg","datePublished": "2023-09-21T00:00:00Z",
  "dateModified": "2023-09-21T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Aryaman Gupta"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://aryaman.space/blog/asynchronous-programming-in-python/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "aryaman.space",
    "logo": {
      "@type": "ImageObject",
      "url": "https://aryaman.space/images/favicon.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://aryaman.space/" accesskey="h" title="aryaman.space (Alt + H)">aryaman.space</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://aryaman.space/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="https://aryaman.space/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://aryaman.space/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://aryaman.space/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://aryaman.space/papershelf/" title="Papershelf">
                    <span>Papershelf</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Asynchronous Programming in Python
    </h1>
    <div class="post-meta"><span title='2023-09-21 00:00:00 +0000 UTC'>September 21, 2023</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;1603 words&nbsp;·&nbsp;Aryaman Gupta

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#sync-vs-async">Sync vs Async</a></li>
        <li><a href="#whats-a-coroutine-in-python">What&rsquo;s a coroutine in Python?</a></li>
        <li><a href="#async-event-loop">Async Event-Loop</a></li>
        <li><a href="#await-keyword">Await keyword</a></li>
        <li><a href="#asyncio-tasks">asyncio Tasks</a></li>
        <li><a href="#more-examples">More Examples</a></li>
        <li><a href="#conclusion">Conclusion</a></li>
        <li><a href="#references">References</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </div>
    </details>
</div>

  <div class="post-content"><h3 id="sync-vs-async">Sync vs Async<a hidden class="anchor" aria-hidden="true" href="#sync-vs-async">#</a></h3>
<p><em><strong>What is synchronous programming?</strong></em></p>
<p><a href="https://deepsource.com/glossary/synchronous-programming"><em>Synchronous programming</em></a> is a programming paradigm in which operations are executed sequentially, one after the other. In this model, each operation waits for the previous one to complete before moving on to the next step. This sequential execution can lead to &lsquo;blocking&rsquo; operations, where certain tasks may take a significant amount of time to finish. These blocking operations can pause the entire program&rsquo;s execution, forcing it to wait until the time-consuming task is done before it can proceed. Let&rsquo;s understand it with an example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;in foo&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># mimicking some blocking operation</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;end foo&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">foo</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Termination of the program&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/images/asynchronous-programming-in-python/image1.png"></p>
<p>Here, you can observe that the program&rsquo;s execution was strictly sequential, and this led to a halt in the entire program due to a blocking operation inside the <code>foo()</code> function, which took 10 seconds to complete. After this 10-second delay, the program continued its execution.</p>
<p>This situation isn&rsquo;t ideal because these blocking operations could encompass a wide range of tasks, such as database queries or waiting for API responses, and they unnecessarily delay the execution of unrelated parts of the program. This is precisely where the concept of <em>asynchronization</em> becomes valuable.</p>
<p><img alt="Distributed Thoughts: Asynchronous APIs Done Right" loading="lazy" src="/images/asynchronous-programming-in-python/image2.jpg"></p>
<p><em><strong>So, what is asynchronization?</strong></em></p>
<p>In computer programming, <a href="https://en.wikipedia.org/wiki/Asynchrony_(computer_programming)"><em>asynchrony</em></a> encompasses events that occur independently of the primary program flow and methods for managing these events. In essence, asynchronization implies that you can proceed with executing other sections of code without the need to wait for a particular task to finish.</p>
<p>The first step in creating an asynchronous program is creating a <a href="https://docs.python.org/3/library/asyncio-task.html#coroutines"><em>coroutine</em></a>.</p>
<h3 id="whats-a-coroutine-in-python">What&rsquo;s a coroutine in Python?<a hidden class="anchor" aria-hidden="true" href="#whats-a-coroutine-in-python">#</a></h3>
<p>A <a href="https://docs.python.org/3/library/asyncio-task.html#coroutines"><em>coroutine</em></a> is simply a wrapped version of a function that allows it to run asynchronously. I recommend using Python 3.7+ to follow this guide.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">asyncio</span>  <span class="c1"># importing async library</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>  <span class="c1"># defining a coroutine object</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;hello world&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>  <span class="c1"># Output - &lt;coroutine object main at 0x7f013de5fd80&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>To create a coroutine object, you just need to create a function normally and add an <code>async</code> keyword in front of it. What it essentially does is create a wrapper around this function.</p>
<p>So when we call this function, it creates a coroutine object <code>&lt;coroutine object main at 0x7f013de5fd80&gt;</code>. This coroutine object works just like a function and can be executed. To execute a coroutine, you need to <em>await</em> it.</p>
<p>Wait, WHAT?! <mark>What&rsquo;s </mark> <a href="https://docs.python.org/3/library/asyncio-task.html#awaitables"><mark>awaiting</mark></a><mark>?</mark> Let me show you the output of the above snippet of code.</p>
<p><img loading="lazy" src="/images/asynchronous-programming-in-python/image3.png"></p>
<p>As we have a coroutine object now, it does not work like a regular Python function.</p>
<h3 id="async-event-loop">Async Event-Loop<a hidden class="anchor" aria-hidden="true" href="#async-event-loop">#</a></h3>
<p>Ok. No worries. Let me just await the <code>main()</code> function call, and then it should work, right?</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">asyncio</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;hello world&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">await</span> <span class="n">main</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/images/asynchronous-programming-in-python/image4.png"></p>
<p>Oh, no! It gave an error. So what&rsquo;s the issue? The reason it&rsquo;s not running our code because we haven&rsquo;t created an <a href="https://docs.python.org/3/library/asyncio-eventloop.html"><em>event-loop.</em></a></p>
<p>Whenever we create an asynchronous program in Python, we need to start/create an <em>event loop</em>. An <em>event loop</em> typically refers to the core mechanism used for managing and handling asynchronous or non-blocking operations. It&rsquo;s a fundamental component of many asynchronous programming frameworks, such as asyncio, which we are using in our study. It is responsible for this simple async syntax we are seeing here in the backend. We must start an <strong>event loop</strong> in whatever thread we are running this asynchronous program in.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">asyncio</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;hello world&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Hence, to start an event loop, we use <code>asyncio.run()</code> and pass it a coroutine object, which acts as an <em>entry point</em> to the event loop.</p>
<h3 id="await-keyword">Await keyword<a hidden class="anchor" aria-hidden="true" href="#await-keyword">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">asyncio</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;awaiting foo...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">await</span> <span class="n">foo</span><span class="p">(</span><span class="s2">&#34;inside foo&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;finished awaiting foo&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>If we look inside the <code>foo()</code> function, the <a href="https://docs.python.org/3/library/asyncio-task.html#awaitables"><em>await keyword</em></a> is required to run an object of coroutine, <mark>because if you just write something like </mark> <code>asyncio.sleep(1)</code> <mark>you are just creating a coroutine but not executing it.</mark></p>
<p>And we are allowed to use await because we are present inside an asynchronous function. So, if we try to see the output of the entire code, it would be as follows:</p>
<p><img loading="lazy" src="/images/asynchronous-programming-in-python/image5.png"></p>
<p>We can see that we awaited the <code>foo()</code> function call, and going inside the <code>foo()</code> function we waited for 1 sec and then the execution was back to the <code>main()</code> function.</p>
<blockquote>
<p>But this is not entirely useful, as we can see that this seems to be just another way of writing a synchronous program as we are waiting for <code>foo()</code> to execute and then we go forward with the execution in the <code>main()</code> function.</p>
<p>The whole point of asynchronization is to run something else while we are waiting for some other part of the execution to finish which is not achieved here. This can be achieved by creating a task.</p>
</blockquote>
<h3 id="asyncio-tasks">asyncio Tasks<a hidden class="anchor" aria-hidden="true" href="#asyncio-tasks">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">asyncio</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;awaiting foo...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">foo</span><span class="p">(</span><span class="s2">&#34;inside foo&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;finished awaiting foo&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Ending foo&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>If we see the code above, we are creating a task using the <code>create_task()</code> function and passing a coroutine object to it. This essentially tells the program to run the task as soon as there is some kind of waiting in the main line of execution.</p>
<p><img loading="lazy" src="/images/asynchronous-programming-in-python/image6.png"></p>
<p>Analyzing the output, we can see that the execution of the main() function is completed and then the execution of foo() starts.</p>
<blockquote>
<p><strong><mark>VERY IMPORTANT RESULT</mark></strong></p>
<p>You can also see that the &ldquo;Ending foo&rdquo; never printed and the execution time of the program was only 0.132 sec. Weren&rsquo;t we sleeping for 1 sec, so shouldn&rsquo;t the execution time be at least 1 sec and &ldquo;Ending foo&rdquo; should be printed after? What happened here is when the <code>foo()</code> function started sleeping for 1 sec, the execution of the program was given back to the <code>main()</code> function, and as there weren&rsquo;t any tasks left in the <code>main()</code> function, it terminated and as a result terminated the execution of <code>foo()</code> as well which never completed its execution.</p>
</blockquote>
<p><img alt="Execution flow" loading="lazy" src="/images/asynchronous-programming-in-python/image7.jpeg"></p>
<p>So if I want to wait for the <code>foo()</code> to finish it&rsquo;s execution before <code>main()</code> terminates I will need to await it, essentially preventing the <code>main()</code> function to terminate prior to the completion of the task <code>foo()</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">asyncio</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;awaiting foo...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">foo</span><span class="p">(</span><span class="s2">&#34;inside foo&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;finished awaiting foo&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">await</span> <span class="n">task</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Ending foo&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Hence the output would be as follows (note the time taken for execution).</p>
<p><img loading="lazy" src="/images/asynchronous-programming-in-python/image8.png"></p>
<h3 id="more-examples">More Examples<a hidden class="anchor" aria-hidden="true" href="#more-examples">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">asyncio</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_data</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Start fetching&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># mimicking fetching data via some request</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done fetching&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">print_numbers</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>  <span class="c1"># mimicking waiting for a response</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="n">task1</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">fetch_data</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="n">task2</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">print_numbers</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1"># awaiting task1 to be completed and then using </span>
</span></span><span class="line"><span class="cl">    <span class="c1"># the value it returned</span>
</span></span><span class="line"><span class="cl">    <span class="n">value</span> <span class="o">=</span> <span class="k">await</span> <span class="n">task1</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">await</span> <span class="n">task2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Imagine the above scenario where I need to get the return value <code>{'data': 1}</code> from the <code>fetch_data()</code> coroutine executing via task1 in the <code>main()</code> function. Hence, I declare the task1 and <code>print(task1)</code>. It would have worked in a synchronous environment. But, from what we have learned so far this is counterintuitive.</p>
<p><img loading="lazy" src="/images/asynchronous-programming-in-python/image9.png"></p>
<p>As we can see in the output of the above code, we never <em>awaited</em> for the task to be completed, hence we would never get the return value from the function (can relate to promises in JavaScript).</p>
<p>Hence the correct code should be as follows:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">asyncio</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_data</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Start fetching&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># mimicking fetching data via some request</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done fetching&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">print_numbers</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>  <span class="c1"># mimicking waiting for a response</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="n">task1</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">fetch_data</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="n">task2</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">print_numbers</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1"># awaiting for task1 to be completed and then using </span>
</span></span><span class="line"><span class="cl">    <span class="c1"># the value it returned</span>
</span></span><span class="line"><span class="cl">    <span class="n">value</span> <span class="o">=</span> <span class="k">await</span> <span class="n">task1</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">await</span> <span class="n">task2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/images/asynchronous-programming-in-python/image10.png"></p>
<p>As we can see in the output, because we awaited for task1 to finish, we can get the value returned by it and print it later. We can further see that as <code>fetch_data()</code> was waiting for 2 sec, for loop in <code>print_numbers()</code> executed 8 times (~2 sec) and gave a chance back to fetch_data() as it&rsquo;s waiting time had ended.</p>
<h3 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h3>
<p>When we write <code>async def func_name()</code>, what we are doing is wrapping another function with an asynchronous version of it. That version is the <a href="https://docs.python.org/3/library/asyncio-task.html#coroutines"><em>Coroutine</em></a>. To run the <em>coroutine</em>, you must <em>await</em> it in some way or add it to the event loop. You can add it to the event loop by creating a task (<code>asyncio.create_task(func_name())</code>). This allows you to start multiple <em>coroutines</em> concurrently. Finally, to start your asynchronous program, you must create an <a href="https://docs.python.org/3/library/asyncio-eventloop.html"><em>event loop</em></a>, which can be done by <a href="http://asyncio.run"><code>asyncio.run(driver_func())</code></a> and passing an entry point coroutine, which is generally the driver function of your program (for example, the main function).</p>
<p><strong><mark>One thing to note is that at a time only a single execution is happening, and it is not to be confused with parallel processing or threading.</mark></strong></p>
<h3 id="references">References<a hidden class="anchor" aria-hidden="true" href="#references">#</a></h3>
<ul>
<li>
<p><a href="https://deepsource.com/glossary/synchronous-programming">deepsource.com/glossary/synchronous-programming</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Asynchrony_(computer_programming)">en.wikipedia.org/wiki/Asynchrony_(computer_programming)</a></p>
</li>
<li>
<p><a href="https://asyncio.run/">asyncio.run/</a></p>
</li>
<li>
<p><a href="https://docs.python.org/3/library/asyncio-task.html#coroutines">docs.python.org/3/library/asyncio-task.htm</a></p>
</li>
<li>
<p><a href="https://docs.python.org/3/library/asyncio-eventloop.html">docs.python.org/3/library/asyncio-eventloop.html</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/@TechWithTim">youtube.com/@TechWithTim</a></p>
</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://aryaman.space/tags/asynchronous/">Asynchronous</a></li>
      <li><a href="https://aryaman.space/tags/async/">Async</a></li>
      <li><a href="https://aryaman.space/tags/python/">Python</a></li>
      <li><a href="https://aryaman.space/tags/aryaman-batcave/">Aryaman-Batcave</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://aryaman.space/blog/breaking-boundaries/">
    <span class="title">« Prev</span>
    <br>
    <span>Breaking Boundaries</span>
  </a>
  <a class="next" href="https://aryaman.space/blog/finding-success-in-a-dynamic-environment/">
    <span class="title">Next »</span>
    <br>
    <span>Finding Success in a Dynamic Environment</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Asynchronous Programming in Python on x"
            href="https://x.com/intent/tweet/?text=Asynchronous%20Programming%20in%20Python&amp;url=https%3a%2f%2faryaman.space%2fblog%2fasynchronous-programming-in-python%2f&amp;hashtags=asynchronous%2casync%2cpython%2caryaman-batcave">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Asynchronous Programming in Python on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2faryaman.space%2fblog%2fasynchronous-programming-in-python%2f&amp;title=Asynchronous%20Programming%20in%20Python&amp;summary=Asynchronous%20Programming%20in%20Python&amp;source=https%3a%2f%2faryaman.space%2fblog%2fasynchronous-programming-in-python%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Asynchronous Programming in Python on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2faryaman.space%2fblog%2fasynchronous-programming-in-python%2f&title=Asynchronous%20Programming%20in%20Python">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Asynchronous Programming in Python on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2faryaman.space%2fblog%2fasynchronous-programming-in-python%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Asynchronous Programming in Python on whatsapp"
            href="https://api.whatsapp.com/send?text=Asynchronous%20Programming%20in%20Python%20-%20https%3a%2f%2faryaman.space%2fblog%2fasynchronous-programming-in-python%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Asynchronous Programming in Python on telegram"
            href="https://telegram.me/share/url?text=Asynchronous%20Programming%20in%20Python&amp;url=https%3a%2f%2faryaman.space%2fblog%2fasynchronous-programming-in-python%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://aryaman.space/">aryaman.space</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
